#Glasser
data <- read.csv("/data/joy/BBL/studies/pnc/n1601_dataFreeze2016/neuroimaging/idemo/n1601_idemo_FinalQA.csv")
glasser <- as.data.frame(matrix(NA, ncol = 10000, nrow=1601))
namesglasser <- read.csv("/data/joy/BBL/studies/pnc/n1601_dataFreeze2016/neuroimaging/pncTemplate/glasser/glasser_lookup.csv", header = F)
namesglasser$V1 <- as.character(namesglasser$V1)
namesglasser$V2 <- as.character(namesglasser$V2)
for (i in 1:1601) {
glasser[i, 1:2] <- data[i, 1:2]
path <- paste0("/data/joy/BBL/studies/pnc/processedData/idemo/idemo_201610/",data[i,1])
datexscanid <- list.files(path)
if (length(datexscanid) != 0) {
path <- paste0(path,"/",datexscanid,"/roiquant/GlasserPNC/" )
copes <- list.files(path)
for (j in 1:length(copes)) {
if (!grepl("nii.gz", copes[j])) {
path.cope <- paste0(path, copes[j])
temp.data <- read.csv(path.cope, sep = "\t")
temp.data[1,5:364] <- temp.data[1,3:362]
temp.data <- temp.data[,-c(3,4)]
cope <- copes[j]
for (k in 3:362) {
name <- names(temp.data)[k]
name <- strsplit(x = name, "_")[[1]][2]
name <- namesglasser[which(namesglasser[,1] == name),2]
copetemp <- strsplit(cope, "_cope")[[1]][2]
copetemp <- strsplit(copetemp,".1D")[[1]][1]
name <- paste0("idemo_glasser_cope",copetemp,"_",name)
names(temp.data)[k] <- name
}
glasser[i,(3 +(j-1)*360):(2 +(j)*360)] <-  as.numeric(temp.data[1,3:362])
names(glasser)[(3 +(j-1)*360):(2 +(j)*360)] <- names(temp.data[,3:362])
}
}
}
}
View(glasser)
names(jlf)[1:2] <- c("bblid","scanid")
names(glasser)[1:2] <- c("bblid","scanid")
index <- 0
for (i in 1:10000) {
if (all(is.na(glasser[,i]))) {
index <- c(index, i)
}
}
index <- index[-1]
glasser <- glasser[,-index]
View(glasser)
